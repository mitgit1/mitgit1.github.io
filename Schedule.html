<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>–®–∫–æ–ª—å–Ω—ã–π –ë–æ—Ç</title>
    <script src="https://telegram.org/js/telegram-web-app.js"></script>
    <style>
        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            max-width: 100%;
            margin: 0;
            padding: 0;
            background-color: #f0f2f5;
        }
        .chat-container {
            display: flex;
            flex-direction: column;
            height: 100vh;
            max-width: 500px;
            margin: 0 auto;
            background-color: white;
            box-shadow: 0 0 10px rgba(0,0,0,0.1);
        }
        .chat-header {
            background-color: #0088cc;
            color: white;
            padding: 15px;
            text-align: center;
            font-size: 18px;
            font-weight: bold;
        }
        .chat-messages {
            flex: 1;
            padding: 15px;
            overflow-y: auto;
        }
        .bot-message {
            background-color: #e5f6ff;
            border-radius: 10px;
            padding: 10px 15px;
            margin-bottom: 10px;
            max-width: 80%;
            align-self: flex-start;
        }
        .user-message {
            background-color: #0088cc;
            color: white;
            border-radius: 10px;
            padding: 10px 15px;
            margin-bottom: 10px;
            max-width: 80%;
            align-self: flex-end;
        }
        .button-container {
            display: grid;
            grid-template-columns: 1fr 1fr;
            gap: 10px;
            padding: 10px;
            background-color: white;
            border-top: 1px solid #e0e0e0;
        }
        .bot-button {
            background-color: #0088cc;
            color: white;
            border: none;
            padding: 12px;
            border-radius: 10px;
            font-size: 14px;
            cursor: pointer;
            transition: background-color 0.2s;
            text-align: center;
        }
        .bot-button:hover {
            background-color: #006699;
        }
        .message {
            display: flex;
            flex-direction: column;
        }
        .timestamp {
            font-size: 11px;
            color: #666;
            margin-top: 3px;
            text-align: right;
        }
    </style>
</head>
<body>
    <div class="chat-container">
        <div class="chat-header">
            –®–∫–æ–ª—å–Ω—ã–π –ë–æ—Ç
        </div>
        <div class="chat-messages" id="chat-messages">
            <!-- –°–æ–æ–±—â–µ–Ω–∏—è –±—É–¥—É—Ç –¥–æ–±–∞–≤–ª—è—Ç—å—Å—è –∑–¥–µ—Å—å -->
        </div>
        <div class="button-container">
            <button class="bot-button" onclick="sendCommand('schedule')">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ‚è∞</button>
            <button class="bot-button" onclick="sendCommand('bells')">–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤üîî</button>
            <button class="bot-button" onclick="sendCommand('fc')">–ì–¥–µ –§–ö?‚öΩ</button>
            <button class="bot-button" onclick="sendCommand('info')">–ò–Ω—Ñ–æüîç</button>
        </div>
    </div>

    <script>
        // –ò–Ω–∏—Ü–∏–∞–ª–∏–∑–∞—Ü–∏—è Telegram WebApp
        const tg = window.Telegram.WebApp;
        tg.expand();
        
        // –¢–æ–∫–µ–Ω –≤–∞—à–µ–≥–æ –±–æ—Ç–∞ (–¥–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏)
        const BOT_TOKEN = '8063971284:AAE9UsktnRtbMK3SWuJPE8H6bTaHnY1h9HQ';
        
        // –ü—Ä–∏ –∑–∞–≥—Ä—É–∑–∫–µ —Å—Ç—Ä–∞–Ω–∏—Ü—ã –ø–æ–∫–∞–∑—ã–≤–∞–µ–º –ø—Ä–∏–≤–µ—Ç—Å—Ç–≤–µ–Ω–Ω–æ–µ —Å–æ–æ–±—â–µ–Ω–∏–µ
        window.onload = function() {
            addBotMessage("–ü—Ä–∏–≤–µ—Ç! –Ø —à–∫–æ–ª—å–Ω—ã–π –±–æ—Ç-–ø–æ–º–æ—â–Ω–∏–∫. –í—ã–±–µ—Ä–∏—Ç–µ –Ω—É–∂–Ω—ã–π –ø—É–Ω–∫—Ç:");
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –±–æ—Ç–∞
        function addBotMessage(text) {
            const chat = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            const botMessage = document.createElement('div');
            botMessage.className = 'bot-message';
            botMessage.innerHTML = text;
            
            const timestamp = document.createElement('div');
            timestamp.className = 'timestamp';
            timestamp.textContent = formatTime(new Date());
            
            messageDiv.appendChild(botMessage);
            messageDiv.appendChild(timestamp);
            chat.appendChild(messageDiv);
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º —á–∞—Ç –≤–Ω–∏–∑
            chat.scrollTop = chat.scrollHeight;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –¥–æ–±–∞–≤–ª–µ–Ω–∏—è —Å–æ–æ–±—â–µ–Ω–∏—è –æ—Ç –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
        function addUserMessage(text) {
            const chat = document.getElementById('chat-messages');
            const messageDiv = document.createElement('div');
            messageDiv.className = 'message';
            
            const userMessage = document.createElement('div');
            userMessage.className = 'user-message';
            userMessage.textContent = text;
            
            const timestamp = document.createElement('div');
            timestamp.className = 'timestamp';
            timestamp.textContent = formatTime(new Date());
            
            messageDiv.appendChild(userMessage);
            messageDiv.appendChild(timestamp);
            chat.appendChild(messageDiv);
            
            // –ü—Ä–æ–∫—Ä—É—á–∏–≤–∞–µ–º —á–∞—Ç –≤–Ω–∏–∑
            chat.scrollTop = chat.scrollHeight;
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è —Ñ–æ—Ä–º–∞—Ç–∏—Ä–æ–≤–∞–Ω–∏—è –≤—Ä–µ–º–µ–Ω–∏
        function formatTime(date) {
            return date.getHours().toString().padStart(2, '0') + ':' + 
                   date.getMinutes().toString().padStart(2, '0');
        }
        
        // –§—É–Ω–∫—Ü–∏—è –¥–ª—è –æ—Ç–ø—Ä–∞–≤–∫–∏ –∫–æ–º–∞–Ω–¥
        function sendCommand(command) {
            let userMessage = '';
            let botResponse = '';
            
            // –û–ø—Ä–µ–¥–µ–ª—è–µ–º —Ç–µ–∫—Å—Ç —Å–æ–æ–±—â–µ–Ω–∏—è –ø–æ–ª—å–∑–æ–≤–∞—Ç–µ–ª—è
            switch(command) {
                case 'schedule':
                    userMessage = '–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ‚è∞';
                    botResponse = `üìÖ –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –Ω–∞ –Ω–µ–¥–µ–ª—é:
                    
<b>–ü–æ–Ω–µ–¥–µ–ª—å–Ω–∏–∫:</b>
1. –ú–∞—Ç–µ–º–∞—Ç–∏–∫–∞
2. –§–∏–∑–∏–∫–∞
3. –õ–∏—Ç–µ—Ä–∞—Ç—É—Ä–∞

<b>–í—Ç–æ—Ä–Ω–∏–∫:</b>
1. –ò—Å—Ç–æ—Ä–∏—è
2. –•–∏–º–∏—è
3. –§–∏–∑–∫—É–ª—å—Ç—É—Ä–∞`;
                    break;
                case 'bells':
                    userMessage = '–†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤üîî';
                    botResponse = `üîî –†–∞—Å–ø–∏—Å–∞–Ω–∏–µ –∑–≤–æ–Ω–∫–æ–≤:
                    
1 —É—Ä–æ–∫: 8:30 - 9:15
2 —É—Ä–æ–∫: 9:25 - 10:10
3 —É—Ä–æ–∫: 10:20 - 11:05
–ü–µ—Ä–µ–º–µ–Ω–∞ 20 –º–∏–Ω—É—Ç
4 —É—Ä–æ–∫: 11:25 - 12:10
5 —É—Ä–æ–∫: 12:20 - 13:05
6 —É—Ä–æ–∫: 13:15 - 14:00`;
                    break;
                case 'fc':
                    userMessage = '–ì–¥–µ –§–ö?‚öΩ';
                    botResponse = `‚öΩ –°–ø–æ—Ä—Ç–∏–≤–Ω—ã–µ –æ–±—ä–µ–∫—Ç—ã:
                    
<b>–§—É—Ç–±–æ–ª—å–Ω–æ–µ –ø–æ–ª–µ:</b> –∫–æ—Ä–ø—É—Å –ë, —ç—Ç–∞–∂ 1
<b>–°–ø–æ—Ä—Ç–∏–≤–Ω—ã–π –∑–∞–ª:</b> –∫–æ—Ä–ø—É—Å –ê, —ç—Ç–∞–∂ 3
<b>–¢—Ä–µ–Ω–∞–∂–µ—Ä–Ω—ã–π –∑–∞–ª:</b> –∫–æ—Ä–ø—É—Å –í, —ç—Ç–∞–∂ 2`;
                    break;
                case 'info':
                    userMessage = '–ò–Ω—Ñ–æüîç';
                    botResponse = `‚Ñπ –ò–Ω—Ñ–æ—Ä–º–∞—Ü–∏—è –æ –±–æ—Ç–µ:
                    
<b>–í–µ—Ä—Å–∏—è:</b> 2.0
<b>–†–∞–∑—Ä–∞–±–æ—Ç—á–∏–∫:</b> –®–∫–æ–ª—å–Ω—ã–π IT-–∫–ª—É–±
<b>–î–∞—Ç–∞ –æ–±–Ω–æ–≤–ª–µ–Ω–∏—è:</b> 01.09.2023
<b>–î–ª—è —Å–≤—è–∑–∏:</b> @school_support`;
                    break;
            }
            
            // –î–æ–±–∞–≤–ª—è–µ–º —Å–æ–æ–±—â–µ–Ω–∏—è –≤ —á–∞—Ç
            addUserMessage(userMessage);
            
            // –í —Ä–µ–∞–ª—å–Ω–æ–º –ø—Ä–∏–ª–æ–∂–µ–Ω–∏–∏ –∑–¥–µ—Å—å –±—É–¥–µ—Ç –∑–∞–ø—Ä–æ—Å –∫ API –±–æ—Ç–∞:
            // fetch(`https://api.telegram.org/bot${BOT_TOKEN}/sendMessage`, {
            //     method: 'POST',
            //     headers: {
            //         'Content-Type': 'application/json',
            //     },
            //     body: JSON.stringify({
            //         chat_id: tg.initDataUnsafe.user.id,
            //         text: command
            //     })
            // })
            // .then(response => response.json())
            // .then(data => {
            //     addBotMessage(data.result.text);
            // });
            
            // –î–ª—è –¥–µ–º–æ–Ω—Å—Ç—Ä–∞—Ü–∏–∏ –∏—Å–ø–æ–ª—å–∑—É–µ–º –ª–æ–∫–∞–ª—å–Ω—ã–µ –æ—Ç–≤–µ—Ç—ã
            setTimeout(() => {
                addBotMessage(botResponse);
            }, 500);
        }
    </script>
</body>
</html>
